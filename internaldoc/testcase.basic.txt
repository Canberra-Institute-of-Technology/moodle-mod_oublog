This script describes steps to test OU Blog standard functionality. It is intended to cover most of the UI and features.

NOTE: In this test case, the word 'blog' always refers to the OU blog.

Some test steps in this script follow on from each other and aren't independent. In these cases the prerequisite steps are listed.

Initial setup
=============

This test case requires:

- a user with administration rights
- a user with student rights
- a test course.

The test server must have debugging set to DEVELOPER level and to display
errors; during all parts of the test script, there should be no debugging
warnings.

CRE Creating blog and data
==========================

CRE01 / admin.
   Enter test course and turn editing on.
   Create a blog called CRE01 which is a whole-course blog (no groups) and
   visible to anyone in the world.
   Set 'Allow comments' to Comments not allowed.

CRE02 / admin.
   Enter test course and turn editing on.
   Create a blog called CRE02 which should have individual mode set to 'Separate individual blogs'.

INT Testing Intro display
(Requires CRE)
=========================

INT01 / admin
   Enter blog "CRE01".
   Select 'Edit settings' link in the Administration block.
   Add any text and any uploaded image into the Intro field.
   Select 'Show intro when posting' checkbox.
   Select 'Save and display' to save changes.
-- Verify intro text and image added are now displayed in the top block to the side of the blog posts area.

INT02 / admin
   Select the 'New blog post' button.
-- Verify intro text and image added are displayed at the top of the new post page.
   Enter some text into the 'Message' field.
   Select 'Add post' button to save the new post and return to main blog view.
-- Verify post created is displayed at the top of the posts area.
-- Verify post created is top of the list in the 'My participation summary' panel in the 'Blog usage' block.
   Select 'Edit' link within post just created.
-- Verify intro text and image added are displayed at the top of the new post page.
   Select 'Cancel' to return to main blog view.

INT03 / admin
   Select 'Edit settings' link in the Administration block.
   Select 'Show intro when posting' checkbox (making it not checked).
   Select 'Save and display' to save changes.
   Select the 'New blog post' button.
-- Verify intro text and image added are NOT displayed at the top of the new post page.
   Return to test course home page.

COM Testing adding comments
(Requires CRE)
===========================

COM1 / admin
   Enter blog "CRE01".
   Select the 'New blog post' button.
   Enter 'COM1' into the title field.
   Enter some text and an uploaded image into the 'Message' field.
   Select 'Add post' button to save the new post and return to main blog view.
-- Verify 'Add your comment' link is not shown against post COM1.

COM02 / admin
   Select 'Edit settings' link in the Administration block.
   Set 'Allow comments' drop down to 'Yes, from everybody (even if not logged in)'.
   Select 'Save and display' to save changes.
   Select 'Edit' against post 'COM1'.
   Set 'Allow comments' to 'Yes, from logged-in users'.
   Select 'Save changes'.
-- Verify 'Add your comment' link is shown against post COM1.

COM03 / admin
   Select 'Add your comment' link against post COM1.
-- Verify 'New comment' screen is shown with 'Post' (collapsed) and 'New comment' (expanded) sections.
   Select 'Post' section to expand.
-- Verify COM1 post is shown correctly, checking display of image and user information.
   Enter some text into the 'Add your comment' field.
   Select 'Add comment' button.
-- Verify returned to blog main view and post COM1 has a '1 comment' link.


TAG Testing post tags
(Requires CRE)
=====================

TAG01 / admin
   Enter blog 'CRE01'.
   Select the 'New blog post' button.
   Enter 'TAG1' into the title field.
   Enter some text into message field and "tag1, tag2, btag2" into the tags field.
   Select 'Add post' button to save the new post and return to main blog view.
-- Verify 'btag2 (1)', 'tag1 (1)' and 'tag2 (1)' are now shown in the 'tags' tag cloud.

TAG02 / admin
   Select 'edit' link for post TAG1 to edit the post just created.
   Select the tags field.
-- Verify no tag choices are shown on field focus.
   Delete all text in the tags field.
-- Verify tag choice 'btag2 [1 posts]', 'tag1 [1 posts]' and 'tag2 [1 posts]' is shown.
   Select 'tag1 [1posts]'
-- Verify tags field now contains 'tag1,' and tag choice is now showing as
   'btag2 [1 posts]', 'tag2 [1 posts]'.

TAG03 / admin
   Enter blog 'CRE02'.
   Select the 'New blog post' button.
   Enter 'ADMIN_TAG1' into the title field.
   Enter some text into message field and "tag3, tag4" into the tags field.
   Select 'Add post' button to save the new post and return to main blog view.
-- Verify 'tag3 (1)' and 'tag4 (1)' are now shown in the 'tags' tag cloud.
   Select the 'New blog post' button.
   Select the tags field.
-- Verify tag choice 'tag3 [1 posts]' and 'tag4 [1 posts]' is shown.
   Type 'ta' into tags field.
-- Verify tag choice 'tag3 [1 posts]' and 'tag4 [1 posts]' is shown.
   Type 'tag3' into tags field.
-- Verify tag choice 'tag3 [1 posts]' is shown.
   Select tag 'tag3'.
-- Verify tags field contains 'tag3, ' and tag choice 'tag4 [1 posts]' is shown.
   Select tag 'tag4'.
-- Verify tags field contains 'tag3, tag4, ' and no tag choice is shown.

TAG04 / student [change]
   Enter blog 'CRE02'.
   Select the 'New blog post' button.
   Select the tags field.
-- Verify no tag choices are shown on field focus.

TAG Testing post tag order
==========================

TAG05 / admin
   Enter blog 'CRE01'.
-- Cofirm that the 'tags' tag cloud contains the label 'Order:' followed by a help icon and
   that beneath this is a label 'Alphabetical', the default order, followed by a
   verticle divider and link 'Use' above the existing tags 'btag2 (1)', 'tag1 (1)' and 'tag2 (1)'.

TAG06 / admin
   Click the help icon to display the tag cloud, order help text.
-- Confirm it matches the following,
   "You can choose to display the list of tags used ordered either in alphabetical order
   or by number of posts used in. Select the two links to switch between ordering methods,
   this choice is remembered and will be used on subsequent views."

TAG07 / admin
   Edit the first 'untitled post' and add the tags 'atag1, btag2'.
   Select 'Save changes'.
-- Verify 'atag1(1) btag2(2) tag1 (1) tag2 (1)' are now shown
   in the 'tags' tag cloud, possibly with btags in larger emboldend text.

TAG08 / admin
   Edit the COM1 post and add the tags 'atag1, btag2'.
   Select 'Save changes'.
-- Verify 'atag1 (2) btag2 (3) tag1 (1) tag2 (1) ' are now shown in the 'tags' tag cloud,
   with btag2 and atag1 in larger emboldend text.

TAG09 / admin
   Edit the TAG1 post and add the tags 'atag1, ctag3'.
   Select 'Save changes'.
-- Verify 'atag1 (3) btag2 (3) ctag3 (1) tag1 (1) tag2 (1)' are now shown in the 'tags' tag cloud,
   with btag2 and atag1 in larger emboldend text.

TAG10 / admin
   Select the 'New blog post' button.
   Enter 'TAG2' into the title field.
   Enter some text into message field and "tag1, btag2" into the tags field.
   Select 'Add post' button to save the new post and return to main blog view.
-- Verify that the tag order is alphabetical 'atag1 (3) btag2 (4) ctag3 (1) tag1 (2)
   tag2 (1)' shown in the 'tags' tag cloud.

TAG11 / admin
   Click the link 'Use' to change the order to popular use order.
-- Confirm that the 'Use' link becomes a label.
-- Confirm that the 'Alphabetical' label becomes a link.
-- Verify that 'btag2 (4) atag1 (3) tag1 (2) tag2 (1) ctag3 (1)' are now shown
   in the 'tags' tag cloud, possibly with some tags in larger emboldend text.
   Retrun to the course main page.
   Re enter blog CRE01
-- Confirm that the link is currently 'Alphabetical'.
-- Confirm that the tag order is still popular use order 'btag2 (4) atag1 (3) tag1 (1)
   tag2 (1) ctag3 (1)' as before.

TAG12 / admin
   Click the link 'Alphabetical' to change the current order to alphabetical order.
-- Confirm that 'Use' becomes the link.
-- Verify that tag cloud now shows 'atag1 (3) btag2 (4) ctag3 (1) tag1 (2) tag2 (1)'
   possibly with some tags in larger emboldend text.
   Return to the course main page.
   Re enter blog CRE01
-- Confirm that the link is currently 'USE'.
-- Confirm that the tag order is alphabetical 'atag1 (3) btag2 (4) ctag3 (1) tag1 (2)
   tag2 (1)' as before.


PAG Testing blog display pagination.
===================================

Note Requires a blog, which contains multiples of the number of posts per page
     ie 20. Please use the Admininistrator's Personal blog and/or Course Blogtest Blog B.WC.

PAG01 / admin
   Enter either blog "B.WC" or Admin personal blog (/mod/oublog/view.php).
   For the course blog.
-- Confirm that the 'New blog post' and 'Participation by user' buttons are displayed
   at the top of the blog posts area.
   For the Admin user's blog.
-- Confirm that the 'New blog post' and 'Import post' (if feature enabled) buttons are displayed
   at the top of the blog posts area.
-- Verify that beneath these buttons, when more than 20 posts are available,
   above the first post and below the last post is a moodle standard pagination bar
   which resembles the following.

           Page: 1|2|3   Next ->
                   - -   ----

-- Confirm that there are a maximum of 20 posts visible.

PAG02 / admin
-- Verify that clicking any 'number' link or the 'Next->' link causes the page to be
   refreshed and should now show a range of different posts, and that the standard
   pagination bar now resembles the following, depending upon link clicked.

           <- Previous   1|2|3    Next ->
              --------   -   -   ----

PAG Testing Personal blog display pagination.
=============================================

Note Tests the 'Personal blog' all posts page, which contains multiples of the number
     of posts per page ie 20.
     Please use the Admininistrator's Personal blog to access the allposts.php.

PAG01 / admin
   Enter Admin personal blog via /mod/oublog/view.php.
   Click the 'View site entries' link.
-- Confirm that the 'New blog post' and 'Import post' buttons are not displayed
   at the top of the blog posts area.

-- Verify that above the first post and below the last post is a moodle standard
   pagination bar which resembles the following, depending upon the number of posts.

           Page: 1|2|3|    Next ->
                   - -     ----

-- Confirm that there are 20 posts visible by various users.

PAG02 / admin
-- Verify that clicking any 'number' link or the 'Next->' link causes the page to be
   refreshed and should now show a range of different posts, and that the standard
   pagination bar now resembles the following, depending upon link clicked.

           <- Previous   1|2|3|   Next ->
              --------   -   -    ----

Test ends.
